# Story 1.2: Configure Project Structure and Development Tooling

## Status

Done

## Story

**As a** developer,
**I want** a well-organized project folder structure with code quality tools (ESLint, Prettier, Git hooks) and Tailwind CSS theming configured,
**so that** the codebase maintains consistent standards and the dark theme with accent colors is ready for component development.

## Acceptance Criteria

1. Folder structure created: `/app`, `/components`, `/lib`, `/public`, `/styles`
2. ESLint configured with Next.js and TypeScript rules
3. Prettier configured for consistent code formatting
4. Git repository initialized with appropriate `.gitignore`
5. Tailwind CSS configured with custom CSS variables for theming
6. Pre-commit hooks set up (Husky/lint-staged) for code quality checks
7. README.md created with project setup instructions

## Tasks / Subtasks

- [x] Create project folder structure (AC: 1)
  - [x] Create `/components` folder for reusable React components
  - [x] Create `/lib` folder for utility functions and helpers
  - [x] Create `/styles` folder for global styles and CSS variables
  - [x] Verify `/app` and `/public` already exist from Story 1.1
  - [x] Document folder structure purpose in comments or README

- [x] Configure ESLint for Next.js and TypeScript (AC: 2)
  - [x] Verify `.eslintrc.json` exists (created by create-next-app)
  - [x] Extend Next.js and TypeScript ESLint recommended rules
  - [x] Add custom rules: no-console warnings, unused vars errors
  - [x] Configure ESLint to work with Prettier (disable conflicting rules)
  - [x] Test ESLint runs successfully with `npm run lint`

- [x] Configure Prettier for code formatting (AC: 3)
  - [x] Install Prettier as dev dependency: `prettier`, `eslint-config-prettier`
  - [x] Create `.prettierrc` config file with formatting rules (semi, quotes, trailing comma)
  - [x] Create `.prettierignore` to exclude node_modules, .next, build artifacts
  - [x] Add format script to package.json: `"format": "prettier --write ."`
  - [x] Test Prettier formatting with `npm run format`

- [x] Initialize Git repository and configure ignores (AC: 4)
  - [x] Initialize Git with `git init` (if not already done)
  - [x] Verify `.gitignore` includes: node_modules, .next, .env\*.local, .DS_Store
  - [x] Add any additional ignores: .vscode, .idea, coverage, \*.log
  - [x] Create initial commit with project setup
  - [x] Verify Git status shows clean working directory

- [x] Configure Tailwind CSS with custom theme variables (AC: 5)
  - [x] Create `/styles/globals.css` with CSS variable definitions
  - [x] Define dark theme base colors and accent variables: `--accent-work`, `--accent-motion`, etc.
  - [x] Extend Tailwind config to use CSS variables in color palette
  - [x] Import globals.css in `/app/layout.tsx` root layout
  - [x] Test CSS variables work by adding test element with accent color

- [x] Set up pre-commit hooks for code quality (AC: 6)
  - [x] Install Husky: `npx husky-init && npm install`
  - [x] Install lint-staged: `npm install --save-dev lint-staged`
  - [x] Configure lint-staged in package.json to run ESLint and Prettier on staged files
  - [x] Create Husky pre-commit hook to run lint-staged
  - [x] Test pre-commit hook by staging files and committing

- [x] Create comprehensive README.md (AC: 7)
  - [x] Document project overview and purpose (KBM.Design portfolio)
  - [x] Add setup instructions: Node version, package manager, install steps
  - [x] Document available npm scripts: dev, build, lint, format
  - [x] Add development workflow guidance and folder structure overview
  - [x] Include troubleshooting section for common issues

## Dev Notes

### Project Context

This is **Story 1.2** in Epic 1 (Development Setup & Foundation). Story 1.1 initialized the Next.js project with dependencies. This story establishes the project structure, code quality tooling, and theming foundation.

**Dependencies on Story 1.1:**

- Next.js 14+ project with TypeScript and App Router exists
- All dependencies installed (Tailwind CSS included)
- Development server runs successfully
- Basic `/app` structure created

### Folder Structure Standards

[Source: docs/prd/epic-1-development-setup.md#acceptance-criteria, docs/architecture/2-frontend-architecture.md]

**Required Folder Structure:**

```
/app                  - Next.js App Router pages and layouts (already exists)
  /page.tsx           - Homepage (created in Story 1.1)
  /layout.tsx         - Root layout (created by Next.js init)
/components           - Reusable React components (CREATE THIS)
/lib                  - Utility functions, helpers, custom hooks (CREATE THIS)
/public               - Static assets: images, fonts, icons (already exists)
/styles               - Global styles, CSS variables (CREATE THIS)
  /globals.css        - Global CSS with theme variables (CREATE THIS)
/node_modules         - Dependencies (git ignored)
.next/                - Next.js build output (git ignored)
```

**Folder Purpose:**

- `/components` - Shared React components used across pages (e.g., Nav, Card, Gallery components)
- `/lib` - Business logic, data fetching utilities, type definitions
- `/styles` - CSS files including Tailwind imports and CSS custom properties

### ESLint Configuration

[Source: docs/prd/epic-1-development-setup.md#technical-notes]

**Next.js ESLint Setup:**

- Next.js creates `.eslintrc.json` with base config during initialization
- Extend with TypeScript and Next.js recommended rules

**Recommended ESLint Config (.eslintrc.json):**

```json
{
  "extends": ["next/core-web-vitals", "next/typescript", "prettier"],
  "rules": {
    "no-console": "warn",
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn"
  }
}
```

**Key Points:**

- `next/core-web-vitals` - Enforces Next.js performance best practices
- `next/typescript` - TypeScript-specific Next.js rules
- `prettier` - Disables ESLint rules that conflict with Prettier
- Custom rules for console warnings and unused vars

### Prettier Configuration

**Prettier Setup:**

- Install `prettier` and `eslint-config-prettier` as dev dependencies
- Create `.prettierrc` for formatting rules

**Recommended Prettier Config (.prettierrc):**

```json
{
  "semi": false,
  "singleQuote": true,
  "trailingComma": "es5",
  "tabWidth": 2,
  "printWidth": 100
}
```

**Prettier Ignore (.prettierignore):**

```
node_modules/
.next/
out/
build/
dist/
*.min.js
package-lock.json
pnpm-lock.yaml
```

### Tailwind CSS Theming Configuration

[Source: docs/architecture/2-frontend-architecture.md#framework-rendering, docs/prd/epic-1-development-setup.md#technical-notes]

**CSS Variables for Dark Theme:**

The architecture specifies using CSS variables for dynamic theming with per-category accent colors.

**Required CSS Variables (/styles/globals.css):**

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Dark theme base colors */
    --background: 0 0% 5%; /* Near black */
    --foreground: 0 0% 95%; /* Near white */
    --muted: 0 0% 15%; /* Muted backgrounds */
    --muted-foreground: 0 0% 65%; /* Muted text */

    /* Category-specific accent colors */
    --accent-work: 210 100% 60%; /* Blue for UX/UI work */
    --accent-motion: 280 70% 60%; /* Purple for motion design */
    --accent-code: 150 60% 50%; /* Green for vibe coding */
  }
}

body {
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
}
```

**Tailwind Config Extension (tailwind.config.ts):**

```typescript
import type { Config } from 'tailwindcss'

const config: Config = {
  content: ['./app/**/*.{js,ts,jsx,tsx,mdx}', './components/**/*.{js,ts,jsx,tsx,mdx}'],
  theme: {
    extend: {
      colors: {
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        muted: 'hsl(var(--muted))',
        'muted-foreground': 'hsl(var(--muted-foreground))',
        accent: {
          work: 'hsl(var(--accent-work))',
          motion: 'hsl(var(--accent-motion))',
          code: 'hsl(var(--accent-code))',
        },
      },
    },
  },
  plugins: [],
}

export default config
```

**Usage in Components:**
Components can reference these colors: `className="bg-background text-foreground"` or `className="text-accent-work"`

### Git Configuration

[Source: docs/prd/epic-1-development-setup.md#acceptance-criteria]

**Git Initialization:**

- Next.js create-next-app may have already initialized Git
- If not, run `git init`

**Essential .gitignore Entries:**

```
# Dependencies
node_modules/
/.pnp
.pnp.js

# Next.js
/.next/
/out/
.vercel/

# Environment variables
.env*.local
.env.local
.env.development.local
.env.test.local
.env.production.local

# Debug logs
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# OS files
.DS_Store
Thumbs.db

# IDE
.vscode/
.idea/
*.swp
*.swo

# Testing
/coverage/
```

### Pre-commit Hooks with Husky

**Husky Setup:**

- Install Husky for Git hooks management
- Install lint-staged to run linters on staged files only

**Package.json Configuration:**

```json
{
  "scripts": {
    "prepare": "husky install"
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": ["eslint --fix", "prettier --write"],
    "*.{json,md,css}": ["prettier --write"]
  }
}
```

**Pre-commit Hook (.husky/pre-commit):**

```bash
#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

npx lint-staged
```

**What This Does:**

- Before every commit, runs ESLint and Prettier on staged files
- Automatically fixes formatting issues
- Prevents commits with linting errors

### README.md Structure

**Essential README Sections:**

1. **Project Overview** - Brief description of KBM.Design portfolio
2. **Tech Stack** - List key technologies (Next.js, React, TypeScript, R3F, Tailwind)
3. **Prerequisites** - Node.js 18+, package manager choice
4. **Installation Steps** - Clone, install, run dev server
5. **Available Scripts** - dev, build, lint, format, test (when added)
6. **Project Structure** - Overview of folder organization
7. **Development Workflow** - How to create branches, commit standards, pre-commit hooks
8. **Troubleshooting** - Common issues and solutions

### Security Considerations

[Source: docs/architecture/7-security-privacy.md]

**Content Security Policy (CSP):**

- Not configured in this story (Story 1.3 handles deployment)
- Will define strict CSP headers for XSS prevention
- Allow scripts/styles only from trusted domains

**Git Security:**

- Ensure `.env*.local` files are git ignored
- Never commit API keys or secrets
- Verify .gitignore before first commit

### Performance Considerations

[Source: docs/architecture/6-performance-accessibility-considerations.md]

- Keep globals.css minimal - only essential base styles
- Tailwind CSS purges unused styles automatically in production
- CSS variables add negligible performance overhead

### Testing Standards

**Testing for This Story:**

This story focuses on configuration, not functional code. Testing approach:

1. **ESLint Verification:**
   - Run `npm run lint` - should pass with no errors
   - Introduce intentional linting error, verify it's caught

2. **Prettier Verification:**
   - Run `npm run format` - should format files consistently
   - Check that formatting is applied to all TypeScript/JSX files

3. **Git Hooks Verification:**
   - Stage files with intentional formatting issues
   - Attempt commit - verify pre-commit hook runs and fixes issues
   - Verify commit succeeds after fixes

4. **Theme Verification:**
   - Start dev server with `npm run dev`
   - Check browser DevTools - verify CSS variables are defined in :root
   - Add test element with accent color class - verify it renders correctly

5. **README Verification:**
   - Follow README installation instructions on a fresh clone
   - Verify all documented scripts work as described

No formal unit tests required for this story - focus on manual verification of tooling.

### Important Notes from Story 1.1

- Node.js 18+ required
- Package manager choice: npm or pnpm
- React Bits/Aceternity UI may need alternatives (not relevant for this story)

### Next Steps After This Story

Story 1.3 will:

- Connect project to Vercel
- Configure deployment pipeline
- Set up environment variables
- Deploy initial version

## Change Log

| Date       | Version | Description                    | Author             |
| ---------- | ------- | ------------------------------ | ------------------ |
| 2025-10-03 | 1.0     | Initial story creation         | Bob (Scrum Master) |
| 2025-10-03 | 1.1     | Story implementation completed | James (Dev Agent)  |

## Dev Agent Record

_This section will be populated by the development agent during implementation._

### Agent Model Used

Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References

None - no issues encountered

### Completion Notes List

- Created folder structure: /components, /lib, /styles
- Configured ESLint with Prettier integration and custom rules (no-console warnings, unused vars errors)
- Installed and configured Prettier (v3.6.2) with eslint-config-prettier (v10.1.8)
- Initialized Git repository and connected to existing GitHub repo (kbm-design)
- Enhanced .gitignore with IDE-specific patterns (.vscode, .idea, _.swp, _.swo)
- Created /styles/globals.css with dark theme CSS variables and category-specific accent colors
- Extended Tailwind config to use CSS variables in color palette
- Updated app/layout.tsx to import globals.css from /styles directory
- Installed Husky (v9.1.7) and lint-staged (v16.2.3) for pre-commit hooks
- Configured lint-staged in package.json to run ESLint and Prettier on staged files
- Created .husky/pre-commit hook to run lint-staged before commits
- Created comprehensive README.md with project overview, tech stack, installation, scripts, structure, workflow, and troubleshooting
- All ESLint and TypeScript validations passing (npm run lint, npx tsc --noEmit)
- All acceptance criteria met and verified

### File List

**Created:**

- /components/ - Empty directory for reusable React components
- /lib/ - Empty directory for utility functions and helpers
- /styles/globals.css - Dark theme with CSS variables for background, foreground, and accent colors
- .prettierrc - Prettier configuration (semi: false, singleQuote: true, trailingComma: es5)
- .prettierignore - Prettier ignore patterns
- .husky/pre-commit - Pre-commit hook running lint-staged
- README.md - Comprehensive project documentation

**Modified:**

- .eslintrc.json - Added "prettier" to extends, custom rules for no-console, unused-vars, explicit-any
- .gitignore - Added IDE patterns (.vscode, .idea, _.swp, _.swo)
- package.json - Added "format" script, "prepare" script, lint-staged configuration
- tailwind.config.ts - Extended colors with CSS variable references
- app/layout.tsx - Updated globals.css import path from ./globals.css to ../styles/globals.css

**Installed Dependencies:**

- prettier@^3.6.2 (devDependency)
- eslint-config-prettier@^10.1.8 (devDependency)
- husky@^9.1.7 (devDependency)
- lint-staged@^16.2.3 (devDependency)

## QA Results

### Review Date: 2025-10-03

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

**Overall Quality: Excellent** ⭐⭐⭐⭐⭐

This is a pristine configuration story with exceptional attention to detail. The developer executed all acceptance criteria flawlessly, demonstrating:

- **Perfect configuration alignment** - All config files match the story specifications exactly
- **Comprehensive tooling setup** - ESLint, Prettier, Husky, and lint-staged working seamlessly
- **Excellent theming foundation** - CSS variables properly configured with semantic naming
- **Professional documentation** - README.md is clear, thorough, and actionable
- **Zero technical debt** - Clean implementation with no shortcuts or missing pieces

The quality matches Story 1.1's exceptional standard (100/100 score).

### Refactoring Performed

No refactoring needed. Code quality is excellent as-is.

### Compliance Check

- **Coding Standards:** ✓ N/A (no coding standards exist yet - this story creates the foundation)
- **Project Structure:** ✓ Perfect adherence to Next.js App Router conventions
- **Testing Strategy:** ✓ Manual verification appropriate for configuration story
- **All ACs Met:** ✓ All 7 acceptance criteria validated

**AC Validation:**

1. ✓ Folder structure created: /app, /components, /lib, /public, /styles all exist
2. ✓ ESLint configured with next/core-web-vitals, next/typescript, prettier extends + custom rules
3. ✓ Prettier v3.6.2 installed with .prettierrc and .prettierignore configured
4. ✓ Git initialized and connected to https://github.com/keelanmiskell/kbm-design.git
5. ✓ Tailwind CSS extended with CSS variable theming in styles/globals.css and tailwind.config.ts
6. ✓ Husky v9.1.7 + lint-staged v16.2.3 configured with pre-commit hook
7. ✓ README.md created with all required sections (overview, tech stack, installation, scripts, structure, workflow, troubleshooting)

### Requirements Traceability

**Given-When-Then Coverage:**

**AC1: Folder structure created**

- Given: Next.js project from Story 1.1 with /app and /public
- When: Developer creates /components, /lib, /styles directories
- Then: Complete folder structure exists for component development
- Evidence: Verified via `ls -la` showing all required directories

**AC2: ESLint configured**

- Given: .eslintrc.json exists from Story 1.1
- When: Developer extends with "prettier" and adds custom rules
- Then: ESLint passes with no errors, Prettier conflicts disabled
- Evidence: .eslintrc.json:2-7, `npm run lint` passes cleanly

**AC3: Prettier configured**

- Given: Project has TypeScript and JSX files
- When: Developer installs Prettier and creates config files
- Then: Code formatting is consistent and automated
- Evidence: .prettierrc matches spec, .prettierignore excludes build artifacts, package.json:10 has format script

**AC4: Git repository initialized**

- Given: Project directory with no Git tracking
- When: Developer runs `git init` and connects to GitHub remote
- Then: Git tracks project and connects to kbm-design repo
- Evidence: `git remote -v` shows correct GitHub URL, .gitignore:36-39 includes IDE patterns

**AC5: Tailwind CSS theming**

- Given: Tailwind CSS installed in Story 1.1
- When: Developer creates CSS variables and extends Tailwind config
- Then: Dark theme with accent colors available via Tailwind classes
- Evidence: styles/globals.css:6-17 defines all variables, tailwind.config.ts:7-16 extends colors, app/layout.tsx:2 imports globals.css

**AC6: Pre-commit hooks**

- Given: Git repository initialized
- When: Developer installs Husky and lint-staged
- Then: Pre-commit hook runs linting/formatting automatically
- Evidence: .husky/pre-commit runs `npx lint-staged`, package.json:39-42 configures lint-staged

**AC7: README.md created**

- Given: Project needs setup documentation
- When: Developer creates README with all sections
- Then: New developers can clone and run project
- Evidence: README.md contains all 8 required sections (overview, tech stack, prerequisites, installation, scripts, structure, workflow, troubleshooting)

### Security Review

✓ **PASS** - No security concerns

- Git repository properly excludes sensitive files (.env\*.local)
- .gitignore:36-39 includes IDE-specific patterns to prevent accidental commits
- No secrets, API keys, or credentials in configuration files
- Husky pre-commit hooks prevent accidental commits of poorly formatted/linted code
- All dependencies from trusted sources (ESLint, Prettier, Husky, lint-staged)

**Security Strengths:**

- .gitignore comprehensively excludes build artifacts, logs, and environment files
- Pre-commit hooks enforce code quality before commits
- TypeScript strict mode (inherited from Story 1.1) helps prevent type-related bugs

### Performance Considerations

✓ **PASS** - Performance baseline maintained

- styles/globals.css is minimal (24 lines) - only essential CSS variables
- Tailwind CSS will purge unused styles in production builds
- CSS variables add negligible runtime overhead
- Husky pre-commit hooks run quickly (lint-staged only processes staged files)
- ESLint and Prettier configured for development workflow without production impact

**Performance Notes:**

- Folder structure supports code splitting and lazy loading (future stories)
- CSS variables enable dynamic theming without JavaScript overhead
- Next.js App Router optimizations remain intact from Story 1.1

### Non-Functional Requirements Assessment

**Maintainability:** ✓ EXCELLENT

- Comprehensive README.md with clear troubleshooting section
- All configuration files follow industry best practices
- CSS variables use semantic names (--background, --accent-work, etc.)
- Folder structure is logical and self-documenting
- Pre-commit hooks prevent code quality degradation

**Reliability:** ✓ PASS

- ESLint passing with zero warnings
- TypeScript compilation successful
- Git repository properly initialized and connected
- Pre-commit hooks tested and working
- All npm scripts functional (dev, build, start, lint, format)

**Scalability:** ✓ PASS (Foundation ready)

- Folder structure supports growing codebase
- ESLint/Prettier enforce consistency as team scales
- Git hooks ensure quality at scale
- CSS theming system extensible for future color schemes

### Technical Debt Identified

**None.** This is a clean, professional implementation with:

- All tasks completed
- All configuration files properly set up
- Comprehensive documentation
- Zero security vulnerabilities
- No code smells or anti-patterns
- No shortcuts or workarounds

### Files Modified During Review

None - no changes needed.

### Gate Status

**Gate: PASS** → `docs/qa/gates/1.2-configure-project-structure.yml`

**Quality Score: 100/100**

**Gate Decision Rationale:**

- All 7 acceptance criteria met and validated
- Zero security vulnerabilities
- ESLint and TypeScript passing with no errors/warnings
- Comprehensive documentation (README.md)
- Professional configuration files matching specifications exactly
- Git repository properly configured with GitHub remote
- Pre-commit hooks tested and functional
- No technical debt identified

### Recommended Status

✅ **Ready for Done**

This story is complete and ready to be marked "Done". No changes required.

**Recommendation:** Proceed to Story 1.3 (Vercel Deployment Pipeline) immediately. The development foundation is solid and ready for deployment configuration.

### Additional Observations

**Strengths:**

1. **Exceptional Execution:** Developer followed story specifications precisely
2. **Comprehensive Tooling:** ESLint + Prettier + Husky + lint-staged all working together seamlessly
3. **Professional Documentation:** README.md is production-ready
4. **Clean Configuration:** All config files are properly formatted and well-organized
5. **Future-Ready:** Folder structure and theming system scale well for upcoming stories

**Consistency with Story 1.1:**

- Same exceptional quality bar (100/100)
- Same attention to detail in documentation
- Same zero-debt approach to implementation
- Continues the pattern of thorough Dev Agent Record

**Next Story Preparation:**
Story 1.3 (Vercel Deployment) should build on this foundation by:

- Deploying the current clean codebase to Vercel
- Configuring environment variables (if needed)
- Setting up deployment pipeline with GitHub integration
- Verifying production build works correctly

**Learning Points for Future Stories:**

- This is the quality standard for all Epic 1 stories
- Pre-commit hooks are now enforcing code quality
- CSS theming system is ready for component development in Epic 2
- Git workflow is established and ready for team collaboration
